[gd_scene load_steps=12 format=3 uid="uid://ctod43gnw8smo"]

[ext_resource type="PackedScene" uid="uid://bgrvknk7qs3xg" path="res://ui.tscn" id="1_7af01"]
[ext_resource type="Script" path="res://main.gd" id="1_jevuk"]
[ext_resource type="PackedScene" uid="uid://bp48pbv6hjbxw" path="res://spawner_a.tscn" id="2_8cp8g"]
[ext_resource type="PackedScene" uid="uid://dixypqqc6x1t6" path="res://spawner_b.tscn" id="3_vx0wk"]
[ext_resource type="PackedScene" uid="uid://shm3vo8hv6iq" path="res://spawner_c.tscn" id="4_kaork"]
[ext_resource type="PackedScene" uid="uid://yyqdft6r7wgt" path="res://Enemy.tscn" id="6_5ahjg"]

[sub_resource type="NavigationMesh" id="NavigationMesh_h1x3c"]
vertices = PackedVector3Array(-12, 0.45, -12, -12, 0.45, 12, 12, 0.45, 12, 12, 0.45, -12)
polygons = [PackedInt32Array(3, 2, 0), PackedInt32Array(0, 2, 1)]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_xm3b2"]
emission_enabled = true
emission = Color(7.12335e-06, 0.754301, 0, 1)
emission_energy_multiplier = 6.56

[sub_resource type="Animation" id="Animation_gnckp"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Target:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Vector3(9, 1, -8)]
}

[sub_resource type="Animation" id="Animation_qj1ob"]
resource_name = "target_animation"
length = 4.0
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Target:position")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(2, 4),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Vector3(-9, 1, -8), Vector3(9, 1, -8)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_gcsc8"]
_data = {
"RESET": SubResource("Animation_gnckp"),
"target_animation": SubResource("Animation_qj1ob")
}

[node name="Main" type="Node3D"]
script = ExtResource("1_jevuk")
spawner_A = ExtResource("2_8cp8g")
spawner_B = ExtResource("3_vx0wk")
spawner_C = ExtResource("4_kaork")

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_h1x3c")

[node name="CSGBox3D" type="CSGBox3D" parent="NavigationRegion3D"]
use_collision = true
size = Vector3(25, 0.1, 25)

[node name="Target" type="CSGTorus3D" parent="." groups=["Target"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9, 1, -8)
use_collision = true
inner_radius = 1.0
outer_radius = 1.5
sides = 32
ring_sides = 8
material = SubResource("StandardMaterial3D_xm3b2")

[node name="Control" parent="." instance=ExtResource("1_7af01")]

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.258819, 0.965926, 0, -0.965926, 0.258819, 0, 15, 6)

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
"": SubResource("AnimationLibrary_gcsc8")
}
autoplay = "target_animation"

[node name="SpawnerA" parent="." node_paths=PackedStringArray("spawner_target") instance=ExtResource("2_8cp8g")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4, 1, 7)
spawner_target = NodePath("../Target")

[node name="Enemy" parent="." node_paths=PackedStringArray("movement_target_node") instance=ExtResource("6_5ahjg")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, 8)
movement_target_node = NodePath("../Target")

[connection signal="spawner_selection" from="Control" to="." method="_on_control_spawner_selection"]
